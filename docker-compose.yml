version: '2'
services:
  blogDB_db:
    image: mysql:latest
    command: --default-authentication-plugin=mysql_native_password
    volumes:
      #- "./.mysql-data/db:/var/lib/mysql"
      - .docker/data/db:/var/lib/mysql
    restart: always
    ports:
      - 3307:3306
    environment:
      MYSQL_ROOT_PASSWORD: rootpw
      MYSQL_DATABASE: blogDB
      MYSQL_USER: user
      MYSQL_PASSWORD: userpw

    #  https://stackoverflow.com/questions/52367254/mysql-in-docker-returns-the-server-requested-authentication-method-unknown-to-t
    #  mysql -h 0.0.0.0 -u root -P 3307 -p
    #  https://medium.com/@crmcmullen/how-to-run-mysql-8-0-with-native-password-authentication-502de5bac661
    #  CREATE USER 'nativeuser'@'localhost'IDENTIFIED WITH mysql_native_password BY 'password';
    #  php bin/console doctrine:database:create
    #  php bin/console doctrine:schema:validate
    #  php bin/console doctrine:schema:update --force